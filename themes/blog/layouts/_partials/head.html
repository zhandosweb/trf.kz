<meta charset="utf-8" />
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<meta name="viewport" content="width=device-width" />
<title>{{ if .Title }}{{ .Title }}{{ else }}{{ .Site.Title }}{{ end }}</title>
{{- with .Description }}
<meta name="description" content="{{ . }}" />
{{- end }}
{{- with .Keywords }}
<meta name="keywords" content="{{ delimit . " " }}" />
{{- end }}
<link rel="canonical" href="{{ .Permalink }}" />
{{- if .Params.noindex }}
<meta name="robots" content="noindex, nofollow" />
{{- else }}
<meta name="robots" content="index, follow" />
{{- end }}
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
<link rel="manifest" href="/site.webmanifest" />

{{- if .IsPage }}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "{{ .Title }}",
  {{- with .Description }}
  "description": "{{ . }}",
  {{- end }}
  "datePublished": "{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}",
  "dateModified": "{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}",
  {{- with .Params.cover }}
  {{- $img := resources.Get (printf "images/%s" .) }}
  {{- if $img }}
  {{- $resized := $img.Resize "640x webp q80" }}
  "image": {
    "@type": "ImageObject",
    "url": "{{ $resized.Permalink }}",
    "width": {{ $resized.Width }},
    "height": {{ $resized.Height }}
  },
  {{- end }}
  {{- end }}
  "author": {
    "@type": "Person",
    "name": "{{ .Site.Params.author }}"
  },
  "publisher": {
    "@type": "Organization",
    "name": "{{ .Site.Title }}"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "{{ .Permalink }}"
  },
  {{- with .Keywords }}
  "keywords": "{{ delimit . " " }}",
  {{- end }}
  "articleBody": {{ .Plain | jsonify }}
}
</script>
{{- end }}

{{- with (templates.Defer (dict "key" "global")) }}
{{- partial "css.html" . }}
{{- end }}